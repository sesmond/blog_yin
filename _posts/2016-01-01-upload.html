---
layout: post
title: 上传文件
---

<script type="text/javascript">
    alert(window.location.search);
    var myurl = GetQueryString("redirect");
    alert("URL参数为"+myurl);


function GetQueryString(name)
{
     var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
     var r = window.location.search.substr(1).match(reg);
     if(r!=null)
     	return  unescape(r[2]); 
     return null;
}

function openUpload(){
	window.name = '测试文件.txt;1024;18764';
	alert(window.name);
	//var result = {fileLink:document.getElementById('fileLink').value};
	//var result = document.getElementById("fileLink").value;
	//var result = 'name=abc;size=123;apr=908';
	//alert(result);
    //window.opener.postMessage(result, '*');
    //alert('123');
    //top.document.getElementById("pg:myform:theBlock:uploadSec:fileLink").value  = '345';
    //alert('234');
//    window.close();
//window.location.href = 'https://c.cs5.visual.force.com/apex/CaseAttachmentProxy';
	self.location.href = myurl;
//alert('跳转后');
}

</script>

<form>

    文件链接 <input type="text" id="fileLink" name="文件链接" /> <br/>

            <button type="button" onclick="openUpload()" >上传文件 </button>

</form>



<script type="text/javascript"> 
	var iframeTag = document.getElementById('frameC'), 
	//iframeSrc = 'https://c.cs5.visual.force.com/apex/CaseAttachmentProxy', 
	//pageHeight = document.documentElement.scrollHeight || document.body.scrollHeight; 

	//iframeTag.src = iframeSrc + pageHeight; 
	//iframeTag.style.display = 'block'; 

window.setTimeout(function(){ 
//alert('主页面设置我（IframeB）的src，通过Hash（#）给我传递它收到的高度：' + location.hash); 
},2000); 
}; 
</script> 
